USE BKEL;

CREATE TABLE IF NOT EXISTS ASSIGNS_TEXTBOOK (
    Id INTEGER NOT NULL AUTO_INCREMENT,
    Semester INTEGER NOT NULL,
    CourseId CHAR(6) NOT NULL,
    TextbookId DECIMAL(13,0) NOT NULL,
    UNIQUE (Semester, CourseId, TextbookId),
    PRIMARY KEY (Id),
    FOREIGN KEY (CourseId) 
        REFERENCES COURSE(CourseId)
        ON DELETE RESTRICT
        ON UPDATE CASCADE,
    FOREIGN KEY (TextbookId) 
        REFERENCES TEXTBOOK(Isbn)
        ON DELETE RESTRICT
        ON UPDATE CASCADE
);

LOAD DATA INFILE '/mnt/DAE242A5E242862B/Code/db/Excel/assigns_textbook.csv' 
INTO TABLE ASSIGNS_TEXTBOOK
    FIELDS TERMINATED BY ','
    LINES TERMINATED BY '\r\n'
    IGNORE 1 LINES
    (Semester, CourseId, TextbookId);